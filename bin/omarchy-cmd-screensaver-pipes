#!/bin/bash

cleanup() {
  hyprctl keyword cursor:invisible false
  if [ -n "$PIPES_PID" ]; then kill "$PIPES_PID" 2>/dev/null; fi
  if [ -n "$CLOCK_PID" ]; then kill "$CLOCK_PID" 2>/dev/null; fi
}

trap cleanup EXIT SIGINT SIGTERM SIGHUP SIGQUIT

hyprctl keyword cursor:invisible true &>/dev/null

pipes.sh -p 10 -t 0 &
PIPES_PID=$!

alacritty --class ScreensaverClock \
  --config-file ~/.local/share/omarchy/default/alacritty/screensaver.toml \
  -e tty-clock -S -c -C 7 -f '%d.%m.%Y' &

CLOCK_PID=$!

wait "$CLOCK_PID"
